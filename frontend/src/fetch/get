import fetch from 'isomorphic-fetch'
import {SERVER_URL, HEADERS} from './constatnts';

async function getEntity(entityName = '', onSuccess) {
    try {
        let response = await fetch('http://localhost:9999/api/' + entityName, {
            method: 'GET',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*',
                credentials: 'cross-origin',
            },
        })
            .then((response) => {
                console.log(response);
                return response.json();
            })
            .then((data) => {
                console.log(data);
                onSuccess(data);
                return data;
            })
            .catch((error) => {
                console.log('ERR', error);
                return error;
            });
        return response.value;
    } catch (error) {
        console.error(error);
    }
}

export default getEntity;